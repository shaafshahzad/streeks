{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport CircularProgress from 'react-native-circular-progress-indicator';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Streak = function Streak(_ref) {\n  var streakName = _ref.streakName,\n    onPress = _ref.onPress,\n    active = _ref.active,\n    createdDate = _ref.createdDate;\n  var _useState = useState(1),\n    _useState2 = _slicedToArray(_useState, 2),\n    count = _useState2[0],\n    setCount = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    canStreak = _useState4[0],\n    setCanStreak = _useState4[1];\n  var containerStyle = [styles.streakContainer, active ? styles.activeStreakContainer : styles.inactiveStreakContainer];\n  var textStyle = active ? styles.activeStreakText : styles.inactiveStreakText;\n  var handlePress = function handlePress() {\n    if (active) {\n      if (canStreak) {\n        setCanStreak(false);\n        setLastStreakClickTime(Date.now());\n        Alert.alert('Confirm Streak', 'Are you ready to add to your streak?', [{\n          text: 'Cancel',\n          style: 'cancel'\n        }, {\n          text: 'Confirm',\n          onPress: incrementCount\n        }]);\n      } else {\n        Alert.alert('Cannot Streak', 'You can only add to a streak once a day.');\n      }\n    } else {\n      incrementCount();\n    }\n  };\n  var incrementCount = function incrementCount() {\n    var newCount = count + 1;\n    setCount(newCount);\n    onPress();\n  };\n  useEffect(function () {\n    var lastClickTime = lastStreakClickTime[streakName];\n    if (active && lastClickTime) {\n      var today = new Date().setHours(0, 0, 0, 0);\n      var nextStreakDate = new Date(today + 24 * 60 * 60 * 1000);\n      var timeUntilNextStreak = nextStreakDate.getTime() - lastClickTime;\n      var timer = setTimeout(function () {\n        setActiveStreaks(function (prevState) {\n          return prevState.filter(function (streak) {\n            return streak.name !== streakName;\n          });\n        });\n        setInactiveStreakContainer(function (prevState) {\n          return [].concat(_toConsumableArray(prevState), [{\n            name: streakName,\n            createdDate: createdDate\n          }]);\n        });\n      }, timeUntilNextStreak);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n  }, [active, streakName, lastStreakClickTime]);\n  var formattedDate = new Date(createdDate).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric'\n  });\n  return _jsx(TouchableOpacity, {\n    onPress: handlePress,\n    activeOpacity: 0.5,\n    children: _jsxs(View, {\n      style: containerStyle,\n      children: [_jsx(Text, {\n        style: textStyle,\n        numberOfLines: 1,\n        children: streakName\n      }), active && _jsx(CircularProgress, {\n        value: count,\n        maxValue: 10,\n        progressValueColor: \"#383D54\",\n        progressValueFontSize: 30,\n        radius: 45,\n        strokeColorConfig: [{\n          color: '#3DC330',\n          value: 0\n        }, {\n          color: '#6627B8',\n          value: 25\n        }, {\n          color: '#279AB8',\n          value: 50\n        }, {\n          color: '#D8E867',\n          value: 75\n        }, {\n          color: '#FF2200',\n          value: 100\n        }],\n        activeStrokeWidth: 15,\n        inActiveStrokeWidth: 15,\n        duration: 500\n      }), !active && _jsxs(View, {\n        children: [_jsxs(Text, {\n          style: styles.info,\n          children: [\"Last Streaked: \", count]\n        }), _jsxs(Text, {\n          style: styles.info,\n          children: [\"Date Added: \", formattedDate]\n        })]\n      })]\n    })\n  });\n};\nexport default Streak;\nvar styles = StyleSheet.create({\n  streakContainer: {\n    width: '100%',\n    height: 70,\n    backgroundColor: 'white',\n    borderRadius: 5,\n    marginRight: 10,\n    alignItems: 'center',\n    justifyContent: 'space-between'\n  },\n  inactiveStreakContainer: {\n    alignItems: 'flex-start',\n    justifyContent: 'space-evenly',\n    paddingHorizontal: 10,\n    marginBottom: 10\n  },\n  activeStreakContainer: {\n    backgroundColor: 'white',\n    height: 150,\n    width: 150,\n    paddingTop: 15,\n    paddingBottom: 15\n  },\n  inactiveStreakText: {\n    fontSize: 18,\n    fontWeight: '300'\n  },\n  activeStreakText: {\n    fontSize: 18,\n    fontWeight: '300'\n  },\n  info: {\n    fontSize: 12,\n    fontWeight: '400',\n    color: '#909090'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","Text","TouchableOpacity","View","Alert","CircularProgress","jsx","_jsx","jsxs","_jsxs","Streak","_ref","streakName","onPress","active","createdDate","_useState","_useState2","_slicedToArray","count","setCount","_useState3","_useState4","canStreak","setCanStreak","containerStyle","styles","streakContainer","activeStreakContainer","inactiveStreakContainer","textStyle","activeStreakText","inactiveStreakText","handlePress","setLastStreakClickTime","Date","now","alert","text","style","incrementCount","newCount","lastClickTime","lastStreakClickTime","today","setHours","nextStreakDate","timeUntilNextStreak","getTime","timer","setTimeout","setActiveStreaks","prevState","filter","streak","name","setInactiveStreakContainer","concat","_toConsumableArray","clearTimeout","formattedDate","toLocaleDateString","month","day","year","activeOpacity","children","numberOfLines","value","maxValue","progressValueColor","progressValueFontSize","radius","strokeColorConfig","color","activeStrokeWidth","inActiveStrokeWidth","duration","info","create","width","height","backgroundColor","borderRadius","marginRight","alignItems","justifyContent","paddingHorizontal","marginBottom","paddingTop","paddingBottom","fontSize","fontWeight"],"sources":["/Users/shaaf/repos/streek/components/Streak.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { StyleSheet, Text, TouchableOpacity, View, Alert } from 'react-native';\nimport CircularProgress from 'react-native-circular-progress-indicator';\n\nconst Streak = ({ streakName, onPress, active, createdDate }) => {\n  const [count, setCount] = useState(1);\n  const [canStreak, setCanStreak] = useState(false);\n\n  const containerStyle = [\n    styles.streakContainer,\n    active ? styles.activeStreakContainer : styles.inactiveStreakContainer,\n  ];\n\n  const textStyle = active ? styles.activeStreakText : styles.inactiveStreakText;\n\n  const handlePress = () => {\n    if (active) {\n      if (canStreak) {\n        setCanStreak(false);\n        setLastStreakClickTime(Date.now()); // Update the lastStreakClickTime\n        Alert.alert(\n          'Confirm Streak',\n          'Are you ready to add to your streak?',\n          [\n            { text: 'Cancel', style: 'cancel' },\n            { text: 'Confirm', onPress: incrementCount },\n          ]\n        );\n      } else {\n        Alert.alert('Cannot Streak', 'You can only add to a streak once a day.');\n      }\n    } else {\n      incrementCount();\n    }\n  };  \n\n  const incrementCount = () => {\n    const newCount = count + 1;\n    setCount(newCount);\n    onPress();\n  };\n\n  useEffect(() => {\n    const lastClickTime = lastStreakClickTime[streakName];\n    if (active && lastClickTime) {\n      const today = new Date().setHours(0, 0, 0, 0);\n      const nextStreakDate = new Date(today + 24 * 60 * 60 * 1000);\n      const timeUntilNextStreak = nextStreakDate.getTime() - lastClickTime;\n\n      const timer = setTimeout(() => {\n        setActiveStreaks((prevState) =>\n          prevState.filter((streak) => streak.name !== streakName)\n        );\n        setInactiveStreakContainer((prevState) => [\n          ...prevState,\n          { name: streakName, createdDate },\n        ]);\n      }, timeUntilNextStreak);\n\n      return () => clearTimeout(timer);\n    }\n  }, [active, streakName, lastStreakClickTime]);\n\n  const formattedDate = new Date(createdDate).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n\n  return (\n    <TouchableOpacity onPress={handlePress} activeOpacity={0.5}>\n      <View style={containerStyle}>\n        <Text style={textStyle} numberOfLines={1}>{streakName}</Text>\n        {active && (\n          <CircularProgress\n            value={count}\n            maxValue={10}\n            progressValueColor=\"#383D54\"\n            progressValueFontSize={30}\n            radius={45}\n            strokeColorConfig={[\n              { color: '#3DC330', value: 0 },\n              { color: '#6627B8', value: 25 },\n              { color: '#279AB8', value: 50 },\n              { color: '#D8E867', value: 75 },\n              { color: '#FF2200', value: 100 },\n            ]}\n            activeStrokeWidth={15}\n            inActiveStrokeWidth={15}\n            duration={500}\n          />\n        )}\n        {!active && (\n          <View>\n            <Text style={styles.info}>Last Streaked: {count}</Text>\n            <Text style={styles.info}>Date Added: {formattedDate}</Text>\n          </View>\n        )}\n      </View>\n    </TouchableOpacity>\n  );\n};\n\nexport default Streak;\n\nconst styles = StyleSheet.create({\n  streakContainer: {\n    width: '100%',\n    height: 70,\n    backgroundColor: 'white',\n    borderRadius: 5,\n    marginRight: 10,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  inactiveStreakContainer: {\n    alignItems: 'flex-start',\n    justifyContent: 'space-evenly',\n    paddingHorizontal: 10,\n    marginBottom: 10,\n  },\n  activeStreakContainer: {\n    backgroundColor: 'white',\n    height: 150,\n    width: 150,\n    paddingTop: 15,\n    paddingBottom: 15,\n  },\n  inactiveStreakText: {\n    fontSize: 18,\n    fontWeight: '300',\n  },\n  activeStreakText: {\n    fontSize: 18,\n    fontWeight: '300',\n  },\n  info: {\n    fontSize: 12,\n    fontWeight: '400',\n    color: '#909090',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}