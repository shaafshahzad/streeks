{"ast":null,"code":"import { defineAnimation } from \"react-native-reanimated\";\nexport var withPause = function withPause(_nextAnimation, paused) {\n  \"worklet\";\n\n  return defineAnimation(_nextAnimation, function () {\n    \"worklet\";\n\n    var nextAnimation = typeof _nextAnimation === \"function\" ? _nextAnimation() : _nextAnimation;\n    var onFrame = function onFrame(state, now) {\n      var lastTimestamp = state.lastTimestamp,\n        elapsed = state.elapsed;\n      if (paused.value) {\n        state.elapsed = now - lastTimestamp;\n        return false;\n      }\n      var dt = now - elapsed;\n      var finished = nextAnimation.onFrame(nextAnimation, dt);\n      state.current = nextAnimation.current;\n      state.lastTimestamp = dt;\n      return finished;\n    };\n    var onStart = function onStart(state, value, now, previousState) {\n      state.lastTimestamp = now;\n      state.elapsed = 0;\n      state.current = 0;\n      nextAnimation.onStart(nextAnimation, value, now, previousState);\n    };\n    var callback = function callback(finished) {\n      if (nextAnimation.callback) {\n        nextAnimation.callback(finished);\n      }\n    };\n    return {\n      onFrame: onFrame,\n      onStart: onStart,\n      isHigherOrder: true,\n      current: nextAnimation.current,\n      callback: callback,\n      previousAnimation: null,\n      startTime: 0,\n      started: false,\n      lastTimestamp: 0,\n      elapsed: 0\n    };\n  });\n};\nexport var withBouncing = function withBouncing(_nextAnimation, lowerBound, upperBound) {\n  \"worklet\";\n\n  return defineAnimation(_nextAnimation, function () {\n    \"worklet\";\n\n    var nextAnimation = typeof _nextAnimation === \"function\" ? _nextAnimation() : _nextAnimation;\n    var onFrame = function onFrame(state, now) {\n      var finished = nextAnimation.onFrame(nextAnimation, now);\n      var velocity = nextAnimation.velocity,\n        current = nextAnimation.current;\n      state.current = current;\n      if (velocity < 0 && state.current <= lowerBound || velocity > 0 && state.current >= upperBound) {\n        state.current = velocity < 0 ? lowerBound : upperBound;\n        nextAnimation.velocity *= -0.5;\n      }\n      return finished;\n    };\n    var onStart = function onStart(_state, value, now, previousState) {\n      nextAnimation.onStart(nextAnimation, value, now, previousState);\n    };\n    return {\n      onFrame: onFrame,\n      onStart: onStart,\n      current: nextAnimation.current,\n      callback: nextAnimation.callback,\n      velocity: 0\n    };\n  });\n};","map":{"version":3,"names":["defineAnimation","withPause","_nextAnimation","paused","nextAnimation","onFrame","state","now","lastTimestamp","elapsed","value","dt","finished","current","onStart","previousState","callback","isHigherOrder","previousAnimation","startTime","started","withBouncing","lowerBound","upperBound","velocity","_state"],"sources":["/Users/shaaf/repos/streek/node_modules/react-native-redash/lib/module/Animations.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/consistent-type-imports */\nimport type { AnimatableValue, Animation } from \"react-native-reanimated\";\nimport Animated, { defineAnimation } from \"react-native-reanimated\";\n\ninterface PausableAnimation extends Animation<PausableAnimation> {\n  lastTimestamp: number;\n  elapsed: number;\n}\n\nexport const withPause = (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _nextAnimation: any,\n  paused: Animated.SharedValue<boolean>\n) => {\n  \"worklet\";\n  return defineAnimation<PausableAnimation>(_nextAnimation, () => {\n    \"worklet\";\n    const nextAnimation: PausableAnimation =\n      typeof _nextAnimation === \"function\" ? _nextAnimation() : _nextAnimation;\n    const onFrame = (state: PausableAnimation, now: number) => {\n      const { lastTimestamp, elapsed } = state;\n      if (paused.value) {\n        state.elapsed = now - lastTimestamp;\n        return false;\n      }\n      const dt = now - elapsed;\n      const finished = nextAnimation.onFrame(nextAnimation, dt);\n      state.current = nextAnimation.current;\n      state.lastTimestamp = dt;\n      return finished;\n    };\n    const onStart = (\n      state: PausableAnimation,\n      value: AnimatableValue,\n      now: number,\n      previousState: PausableAnimation\n    ) => {\n      state.lastTimestamp = now;\n      state.elapsed = 0;\n      state.current = 0;\n      nextAnimation.onStart(nextAnimation, value, now, previousState);\n    };\n    const callback = (finished?: boolean): void => {\n      if (nextAnimation.callback) {\n        nextAnimation.callback(finished);\n      }\n    };\n    return {\n      onFrame,\n      onStart,\n      isHigherOrder: true,\n      current: nextAnimation.current,\n      callback,\n      previousAnimation: null,\n      startTime: 0,\n      started: false,\n      lastTimestamp: 0,\n      elapsed: 0,\n    };\n  });\n};\n\nexport interface PhysicsAnimation extends Animation<PhysicsAnimation> {\n  velocity: number;\n  current: number;\n}\n\n/**\n *  @summary Add a bouncing behavior to a physics-based animation.\n *  An animation is defined as being physics-based if it contains a velocity in its state.\n *  @example\n    // will bounce if the animations hits the position 0 or 100\n    withBouncing(withDecay({ velocity }), 0, 100)\n * @worklet\n */\nexport const withBouncing = (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _nextAnimation: any,\n  lowerBound: number,\n  upperBound: number\n): number => {\n  \"worklet\";\n  return defineAnimation<PhysicsAnimation>(_nextAnimation, () => {\n    \"worklet\";\n\n    const nextAnimation: PhysicsAnimation =\n      typeof _nextAnimation === \"function\" ? _nextAnimation() : _nextAnimation;\n\n    const onFrame = (state: PhysicsAnimation, now: number) => {\n      const finished = nextAnimation.onFrame(nextAnimation, now);\n      const { velocity, current } = nextAnimation;\n      state.current = current;\n      if (\n        (velocity < 0 && state.current <= lowerBound) ||\n        (velocity > 0 && state.current >= upperBound)\n      ) {\n        state.current = velocity < 0 ? lowerBound : upperBound;\n        nextAnimation.velocity *= -0.5;\n      }\n      return finished;\n    };\n    const onStart = (\n      _state: PhysicsAnimation,\n      value: number,\n      now: number,\n      previousState: PhysicsAnimation\n    ) => {\n      nextAnimation.onStart(nextAnimation, value, now, previousState);\n    };\n    return {\n      onFrame,\n      onStart,\n      current: nextAnimation.current,\n      callback: nextAnimation.callback,\n      velocity: 0,\n    };\n  });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}